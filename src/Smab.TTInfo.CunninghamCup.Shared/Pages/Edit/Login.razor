@page "/login"
@using Microsoft.Extensions.Options
@inject NavigationManager Navigation
@inject IJSRuntime JS
@inject IOptions<TTInfoOptions> _options
@rendermode InteractiveServer

<h2>Login</h2>
<p>
	<label>
		Magic Word: <input type="password" @bind="magicWord" />
	</label>
	<button class="btn btn-primary" @onclick="OnLogin">Login</button>
</p>

@code {
	private string magicWord = "";

	private async Task OnLogin()
	{
		string expectedMagicWord = _options.Value.MagicWord;
		if (magicWord == expectedMagicWord)
		{
			// Store edit permission in a cookie
			await JS.InvokeVoidAsync("eval", $"document.cookie = 'canEdit={magicWord}; path=/'");
			Navigation.NavigateTo("/edit/group");
		}
		else
		{
			// Optionally show error or handle failed login
		}
	}
}
